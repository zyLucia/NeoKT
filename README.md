Neo 内核调谐器 - 自适应内核参数自动调优器

概述

NeoKernelTuner 是一款面向搭载 Linux 4.14+ 内核的 64 位 Android 设备的智能零侵入内核参数优化器。它基于用户活动、屏幕状态及系统负载自动适配系统参数，在保持响应性的同时最大化电池续航。

特性

✅ 智能配置切换

- 空闲配置 - 屏幕关闭时激进省电
- 均衡配置 - 日常使用中兼顾性能与续航的黄金比例
- 性能配置 - 为交互任务提供极致响应性
- 游戏配置 - 为高负载应用优化低延迟与高吞吐量

✅ 实时活动检测

- 屏幕状态监控（亮度追踪）
- 进程计数与负载检测
- 内存压力估算（基于 PSI 或回退至 MemAvailable）
- 从 
"/proc/diskstats" 追踪 I/O 活动

✅ 零用户干预运行

- 无需用户输入自动选择配置
- 后台静默参数调优
- 无可见界面，无通知打扰
- 从使用模式中自主学习配置偏好

✅ 全面内核参数调优

优化 
"vm.*"、
"net.*"、
"kernel.*" 及 
"fs.*" 类参数：

- 内存管理（交换倾向值、脏页比率、回写间隔）
- 网络优化（TCP 保活、连接复用）
- I/O 调度（页面簇、统计间隔、笔记本模式）
- 文件系统限制（最大文件数、inotify 监视数）
- 进程统计（任务延迟记账、迁移成本）

系统要求

- 架构：64 位 ARM（aarch64/arm64）
- 内核版本：Linux 4.14 或更高
- Android 版本：Android 11+
- 权限：Root 访问（KSU/Magisk 等）

安装

方法一：Root 访问

安装于 Kernel SU、Magisk、Sukisu Ultra 或类似平台

方法二：ROM 集成

架构

配置检测逻辑

屏幕开启 + 低负载 → 空闲配置（节省电量）
屏幕开启 + 中负载 → 均衡配置
屏幕开启 + 重负载 → 性能配置
屏幕开启 + 重负载 + 高内存占用 → 游戏配置
屏幕关闭 + 任意负载 → 空闲配置（极致省电）

活动指标

- 屏幕状态 - 从亮度文件检测
- 进程数 - 从 
"/proc" 解析
- 内存压力 - PSI 平均 10 秒值或 MemAvailable/MemTotal 比率
- I/O 活动 - 从 
"/proc/diskstats" 读取完成计数

参数应用策略

1. 检测设备特性（内核版本、架构、内存、CPU 核心数）
2. 以 5 秒间隔监控用户活动
3. 基于当前负载选择最优配置
4. 经稳定性检查（连续两次读数一致）后应用参数
5. 写入前验证每个参数是否存在
6. 记录详细成功/失败信息

安全特性

✅ 参数验证 - 写入前检查每个参数是否存在

✅ 稳定性检测 - 配置变更前等待连续两次读数一致

✅ 回退处理 - 优雅应对写入失败

✅ 日志记录 - 详细 logcat 输出以供诊断

✅ 版本检查 - 启动时验证内核版本

✅ 架构检查 - 运行前确保 64 位架构

日志记录

所有事件记录于：

1. Android 日志系统 - 
"logcat | grep NeoKernelTuner"

性能影响

电池续航提升

- 空闲模式：8 小时空闲状态下提升 10-20%
- 减少轮询导致的幻醒
- 优化内存压力以减少 GC 停顿

性能开销

- CPU 占用：<0.5%（5 秒轮询间隔）
- 内存占用：约 512 KB（最小化状态追踪）
- I/O 操作：极少（只读参数检测）

故障排查

二进制文件无法启动

# 检查权限
adb shell ls -l /system/xbin/Neo-kernel-tuner

# 检查日志
adb logcat | grep -E "NeoKernelTuner|kernel|tuner"

# 验证架构
adb shell getconf LONG_BIT  # 应返回 64

参数未生效

# 检查失败参数
adb logcat | grep "Failed parameters"

# 验证参数存在
adb shell cat /proc/sys/vm/swappiness

内核版本问题

# 检查内核版本
adb shell uname -r  # 必须为 4.19+

贡献指南

如有问题、改进建议或优化想法，请参阅主项目仓库。
